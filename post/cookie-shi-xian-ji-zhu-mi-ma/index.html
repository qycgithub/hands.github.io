<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cookie实现记住密码 | 一个慵懒的人</title>
<link rel="shortcut icon" href="https://qycgithub.github.io//favicon.ico?v=1588830380050">
<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.css" rel="stylesheet">
<link rel="stylesheet" href="https://qycgithub.github.io//styles/main.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/go.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>

<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            一个慵懒的人
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
    </div>
</nav>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    Cookie实现记住密码
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2019-12-17 ·
                    </time>
                    
                        <a href="https://qycgithub.github.io//tag/DQEEANY31" class="post-tags">
                            # WEB
                        </a>
                    
                        <a href="https://qycgithub.github.io//tag/QyaQR9sHB" class="post-tags">
                            # 经验项目
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>今天记录一下关于记住密码功能</p>
<p>在这里列出两个例子可以直接复用  稍加修改</p>
<p>第一个实现了记住密码  下次自动填充</p>
<p>样式如下：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdn.net/20180914115630528?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTY0ODQ3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></figure>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;登录页面&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;layui/css/layui.css&quot;&gt;
        &lt;script src=&quot;js/jquery.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/jquery.cookie.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/jquery.base64.js&quot;&gt;&lt;/script&gt;
        &lt;style  type=&quot;text/css&quot;&gt; 
            html,body{
                height:100%;
                width:100%;
                background-color: #53E3A6;
            }
            .div1{
                height: 300px;
                width: 400px;
                position: absolute;
                top: 50%;
                left: 50%;
                margin-top: -150px;
                margin-left: -200px;
                background: #F0F0F0;
                text-align: center;
                padding-top: 10px;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body  οnlοad=&quot;getCookie();&quot;&gt;
        &lt;div class=&quot;div1&quot;&gt;
            &lt;h2&gt;后台管理系统&lt;/h2&gt;
            &lt;div&gt;
                &lt;div style=&quot;margin: 10px;&quot;&gt;
                  &lt;input id=&quot;zhanghao&quot; type=&quot;text&quot; name=&quot;zhanghao&quot; required lay-verify=&quot;required&quot; placeholder=&quot;请输入账号&quot; autocomplete=&quot;off&quot; class=&quot;layui-input&quot; value=&quot;admin&quot;&gt;
                &lt;/div&gt;
                &lt;div style=&quot;margin: 10px;&quot;&gt;
                  &lt;input id=&quot;mima&quot; type=&quot;password&quot; name=&quot;password&quot; required lay-verify=&quot;required&quot; placeholder=&quot;请输入密码&quot; autocomplete=&quot;off&quot; class=&quot;layui-input&quot; value=&quot;123456&quot;&gt;
                &lt;/div&gt;
                &lt;div style=&quot;margin: 10px;&quot;&gt;
                    &lt;input style=&quot;position: absolute;left: 10px;width: 20px;height: 20px;&quot; type=&quot;checkbox&quot; name=&quot;jizhu&quot; title=&quot;发呆&quot; lay-skin=&quot;primary&quot;&gt;
                    &lt;span style=&quot;position: absolute;left: 40px;&quot;&gt;记录密码&lt;/span&gt;
                &lt;/div&gt;
                &lt;div style=&quot;margin-top: 50px;&quot;&gt;
                    &lt;button id=&quot;denglu&quot; class=&quot;layui-btn&quot; style=&quot;width: 200px;&quot;&gt;登录&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;script&gt;
            //var loginurl=&quot;http://localhost:8088/register&quot;;
            var loginurl=&quot;http://localhost:8088/login&quot;;
            $(&quot;#denglu&quot;).click(function(){
                login();
            });
            //设置cookie  
            function setCookie(){   
                 var loginCode = $(&quot;#zhanghao&quot;).val(); //获取用户名信息    
                 var pwd = $(&quot;#mima&quot;).val(); //获取登陆密码信息    
                 var checked = $(&quot;input[type='checkbox']&quot;).is(':checked');//获取“是否记住密码”复选框  
                   //console.log(&quot;setCookie方法是否记住密码：&quot;+checked);
                 if(checked){ //判断是否选中了“记住密码”复选框    
                     //设置cookie过期时间
                     var date = new Date();
                    date.setTime(date.getTime()+60*1000);//只能这么写，60表示60秒钟
                    //console.log(&quot;cookie过期时间：&quot;+date);
                    $.cookie(&quot;login_code&quot;,loginCode,{ expires: date, path: '/' });//调用jquery.cookie.js中的方法设置cookie中的用户名    
                    $.cookie(&quot;pwd&quot;,$.base64.encode(pwd),{ expires: date, path: '/' });//调用jquery.cookie.js中的方法设置cookie中的登陆密码，并使用base64（jquery.base64.js）进行加密
                 }else{     
                     $.cookie(&quot;login_code&quot;, null);  
                    $.cookie(&quot;pwd&quot;, null);     
                 }      
            } 
            
            //清除所有cookie函数
            function clearAllCookie() {
                var date=new Date();
                date.setTime(date.getTime()-10000);
                var keys=document.cookie.match(/[^ =;]+(?=\=)/g);
                console.log(&quot;需要删除的cookie名字：&quot;+keys);
                if (keys) {
                    for (var i =  keys.length; i--;)
                      document.cookie=keys[i]+&quot;=0; expire=&quot;+date.toGMTString()+&quot;; path=/&quot;;
                }
            }
            //获取cookie    
            function getCookie(){ 
                 var loginCode = $.cookie(&quot;login_code&quot;); //获取cookie中的用户名    
                 var pwd =  $.cookie(&quot;pwd&quot;); //获取cookie中的登陆密码  
                 console.log(&quot;获取cookie:账户：&quot;+loginCode);
                 console.log(&quot;获取cookie:密码：&quot;+pwd);
                 if (!loginCode||loginCode==0) {
                      console.log(&quot;账户：&quot;+!loginCode);
                      //alert(&quot;请输出内容！&quot;);
                 }else{
                     $(&quot;#zhanghao&quot;).val(loginCode);   
                 }
                 if(!pwd||pwd==0){
                     console.log(&quot;密码：&quot;+!pwd);
                 }else{
                     //密码存在的话把密码填充到密码文本框    
                     //console.log(&quot;密码解密后：&quot;+$.base64.decode(pwd));
                    $(&quot;#mima&quot;).val($.base64.decode(pwd));
                    //密码存在的话把“记住用户名和密码”复选框勾选住    
                    $(&quot;[name='jizhu']&quot;).attr(&quot;checked&quot;,&quot;true&quot;);
                 }
                     
            } 
            function login(){     
                var userName = $('#zhanghao').val(); 
                console.log(&quot;用户名：&quot;+userName);
                if(userName == ''){    
                    alert(&quot;请输入用户名。&quot;);    
                    return;    
                }    
                var userPass =$('#mima').val(); 
                console.log(&quot;密码：&quot;+userPass);
                if(userPass == ''){    
                    alert(&quot;请输入密码。&quot;);    
                    return;    
                }  
                //判断是否选中复选框，如果选中，添加cookie  
                var jizhupwd=$(&quot;input[type='checkbox']&quot;).is(':checked');
                console.log(&quot;是否记住密码：&quot;+jizhupwd);
                if(jizhupwd){    
                    //添加cookie    
                    setCookie();      
                }else{    
                    clearAllCookie();
                }  
                netWorking(userName,userPass);//联网上传账号密码
            }
            function netWorking(zhanghao,mima){
                    $.ajax({
                        type:&quot;post&quot;,    
                        url:loginurl,    
                        data:{
                             username:zhanghao,  //期刊id
                             password:mima, 
                        }, 
                        success: function(res) {
                           console.log(&quot;请求数据1.：&quot;+res);
                           console.log(&quot;请求数据2.：&quot;+JSON.stringify(res));
                           var datas=eval(res);
                           var ticket=datas.ticket;
                              //var ticket=datas.msg;
                           console.log(&quot;请求数据2.：&quot;+ticket);
                           if (ticket==undefined) {
                                 alert(&quot;请您先注册&quot;);
                           } else{
                               window.location.href='htmls/home.html';
                           }
                        },
                        error:function() { 
                            alert(&quot;失败&quot;);
                       } 
                    });
            }

        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<p>第二个还实现了自动登录</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdn.net/20170809142545668?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSGV5V2VDb21l/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></figure>
<p>我布置了checkbox，一个用于记住密码，一个用于自动登录。</p>
<pre><code class="language-html">    &lt;label&gt;
    &lt;input type=&quot;checkbox&quot; name=&quot;autoLogin&quot; id = &quot;autoLogin&quot;&gt; 自动登录
    &lt;/label&gt;
</code></pre>
<pre><code class="language-html">    &lt;label&gt;
    &lt;input type=&quot;checkbox&quot; name=&quot;rememberMe&quot; id = &quot;rememberMe&quot;&gt; 记住密码
    &lt;/label&gt;
</code></pre>
<p>接下来就是如何对这两个按钮进行触发操作了，我主要是利用了jquery.cookie.js来进行的操作。这个需要自己去下载，然后引进。</p>
<pre><code class="language-html">//记住用户名密码
        function Save() {
            if ($(&quot;#rememberMe&quot;).prop(&quot;checked&quot;)) {
                var str_username = $(&quot;#NameText&quot;).val();//用户名
                var str_password = $(&quot;#inputPassword&quot;).val();//密码
                $.cookie(&quot;rmbUser&quot;, &quot;true&quot;, { expires: 7 }); //存储一个带7天期限的cookie
                $.cookie(&quot;username&quot;, str_username, { expires: 7 });
                $.cookie(&quot;password&quot;, str_password, { expires: 7 });
            }
            else {
                $.cookie(&quot;rmbUser&quot;, &quot;false&quot;, { expire: -1 });
                $.cookie(&quot;username&quot;, &quot;&quot;, { expires: -1 });
                $.cookie(&quot;password&quot;, &quot;&quot;, { expires: -1 });
            }
 
            if ($(&quot;#autoLogin&quot;).prop(&quot;checked&quot;)) {
                var str_username = $(&quot;#NameText&quot;).val();
                var str_password = $(&quot;#inputPassword&quot;).val();
                $.cookie(&quot;auto&quot;, &quot;true&quot;, { expires: 7 }); //存储一个带7天期限的cookie
                $.cookie(&quot;username&quot;, str_username, { expires: 7 });
                $.cookie(&quot;password&quot;, str_password, { expires: 7 });
            }
            else {
                $.cookie(&quot;auto&quot;, &quot;false&quot;, { expire: -1 });
                $.cookie(&quot;username&quot;, &quot;&quot;, { expires: -1 });
                $.cookie(&quot;password&quot;, &quot;&quot;, { expires: -1 });
            }
        };

</code></pre>
<p>通过上面代码的操作就可以进行判断，是否勾选了记住密码和自动登录的按钮，然后便将这个记录到cookie中，cookie的寿命为7天，关于如何触发这个save：在button上设置一个onclick，调用save函数，便可以在实现登陆的时候触发。</p>
<p>这样便把用户的相关信息存入了浏览器中，接下来就是如何在下一次点开登陆界面的时候自动填充数据。</p>
<pre><code class="language-html">$(document).ready(function () {
            $(&quot;#autoLogin&quot;).change(function() {
                if($(&quot;#autoLogin&quot;).prop(&quot;checked&quot;)){
                    $.cookie(&quot;auto&quot;, &quot;true&quot;, { expires: 7 });
                }else{
                    $.cookie(&quot;auto&quot;, &quot;false&quot;, { expires: 7 });
                }
            });
 
            if ($.cookie(&quot;rmbUser&quot;) == &quot;true&quot;) {
                $(&quot;#rememberMe&quot;).attr(&quot;checked&quot;, true);
                $(&quot;#NameText&quot;).val($.cookie(&quot;username&quot;));
                $(&quot;#inputPassword&quot;).val($.cookie(&quot;password&quot;));
            }
 
            if ($.cookie(&quot;auto&quot;) == &quot;true&quot;) {
                setTimeout(function(){
                    if($.cookie(&quot;auto&quot;) == &quot;true&quot;)
                    window.location.href='下一个界面';
                },5000);
            }
};

</code></pre>
<p>首先在页面加载的一开始我便进行了判断，如果cookie中记录了记住我和自动登录，那么便自动填充数据，我在下面嗨加入了一些判断，如果是自动登录，用户会等待五秒钟，若是在等待过程中用户取消了勾选自动登录，那么监听器便接收到，从而改变状态，不会进入下一个界面。</p>
<p>这只是写的一个简单的记住密码和自动登陆，与后台数据库进行交互，进而判断的部分没有进行展示。</p>
<p>有什么想法可以联系我的邮箱3227444307@qq.com一起进步</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://qycgithub.github.io//post/mysql" class="post-title gt-a-link">
                    MYSQL
                </a>
            </div>
        

        
            
                <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '53970427b566ef4e177f',
    clientSecret: '615791b07aa3aa0085641bd149f120840ebd3a41',
    repo: 'comment',
    owner: 'qycgithub',
    admin: ['qycgithub'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

            

            
        
		
		

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">撸起袖子加油干</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://qycgithub.github.io//atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
    hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
